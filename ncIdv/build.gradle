description = "Package that generates a jar file for use in the IDV"
ext.title = "ncIdv Module"

// These are now defined in /gradle/fatJars.gradle
//dependencies {
//    compile project(":cdm")
//    runtime project(":bufr")
//    runtime project(":grib")
//    runtime project(":netcdf4")
//    runtime project(":opendap")
//    runtime project(":visadCdm")
//}

ext {
    ncIdvJar = 'ncIdvs-' + version + '.jar'
    webstartWorkingDir = "build/signed"
    if (project.hasProperty("webdir")) {
        webstartDir = webdir + "webstart"
    }
    destinationDir = 'build/libs/'
}

/* following properties should be in gradle.properties:
   keystore=name of keystore file
   keystoreAlias=idv
   keystorePassword=password of keystore file
   webdir:parent of conan content directory
   ftpdir:ftp directory
 */
// TODO: Use the Sync task for this.
//task releaseCdm(dependsOn: ['shadowJar']) << {
//    if (project.hasProperty("ftpdir")) {
//        // println "destinationDir= " + ${destinationDir}
//        println "copy " + ncIdvJar + " to " + ftpdir
//        copy { // does not give error message
//            // from ${destinationDir} + ncIdvJar
//            from ncIdvJar
//            into ftpdir
//        }
//    } else {
//        println "Property \"ftpdir\" must be defined to run \"releaseCdm\" task."
//    }
//}
