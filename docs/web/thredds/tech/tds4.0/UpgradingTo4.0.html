<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

  <title>Upgrading To TDS 4.0</title><style type="text/css">
  pre {font-size: 9pt; padding: 10px; background-color: #E7E7E7; border: 1px solid #CFCFCF; width: 85%;}
  code {font-size: 11pt;}
  dl {margin: 10px 5px 5px 15px;)
  </style></head>
<body>
<h1><img src="../images/unidataLogo.png" align="middle" height="75" width="75"> Upgrading To TDS 4.0</h1>

<hr>

<h2><a name="NewServices">New Services</a></h2>

<ul>
  <li>A WMS data service has been added (thanks to Jon Blower and Pauline Mak, the ncWMS
developers). Use like WCS, by adding a WMS service to your catalog, and
giving your gridded datasets that service.</li>
  </ul>
<pre style="margin-left: 40px;">&lt;service name="wms" serviceType="WMS" base="<strong>/thredds/wms/</strong>" /&gt;<br>&lt;dataset name="my gridded dataset" urlPath="so/cool/data.nc" &gt;<br>  &lt;serviceName&gt;<strong>wms</strong>&lt;/serviceName&gt;<br>&lt;/dataset&gt;<br></pre>
<blockquote>
  <p>  You must also explicitly enable the WMS service in  <a href="../reference/ThreddsConfigXMLFile.html#WMS">threddsConfig.xml</a>:</p>
</blockquote>
<pre style="margin-left: 40px;">&lt;WMS&gt;<br>  &lt;allow&gt;true&lt;/allow&gt;<br>&nbsp; &lt;paletteLocationDir&gt;palettes&lt;/paletteLocationDir&gt;  <br>  ...<br>&lt;/WMS&gt;</pre>
<p>See <a href="reference/WMS.html">THREDDS Web Map Service</a> for complete details. Be sure to add the <a href="reference/WMS.html#jvmOption">JVM</a> option if running on a Unix machine.</p>
<h2><a name="EnableServices">Must Explicitly Enable Certain Services</a></h2>
<p>More detail on explicitly enabling services in the <a href="../reference/index.html">TDS Reference</a> for each individual service. The following services must be explicitly enabled in the <code>threddsConfig.xml</code> file:</p><ul><li>WCS (required explicit allow since 3.16)</li><li>WCS for remote datasets (required explicit allow since 3.17)</li>
  <li>WMS: general allow and allow for remote datasets.</li>
<li>Catalog Services on remote catalogs (requires explicit allow as of 4.0)</li><li>Less common services:</li><ul><li>DLwriter (requires explicit allow as of 4.0)</li><li>DLwriter on remote catalogs (requires explicit allow as of 4.0)</li></ul><li>Deprecated services (as of 4.0):</li><ul><li>CatalogGen (requires explicit allow as of 4.0)</li><li>DqcService (requires explicit allow as of 4.0)</li></ul></ul>
<h2><a name="DapRequestSizeRestriction">New Size Restrictions on OPeNDAP Requests</a></h2>
<p>As of TDS 4.0.12,
binary (".dods") and ASCII (".asc") OPeNDAP requests are being
restricted depending on the size of the response body. By default, the
size limit on the binary response is&nbsp;500Mbytes and on the ascii
response is 50Mbytes. Details on configuring these size limits are
available <a href="reference/ThreddsConfigXMLFile.html#opendap">here</a>.</p><p>
If a binary
OPeNDAP request will result in a response body larger than the
configured limit
or an ASCII OPeNDAP request will result in a response body larger than
the configured limit, the request will not be handled. Instead an HTTP
status code
of 403 (Forbidden) is returned with a "dods-error" response body.&nbsp;</p>

<h2><a name="CdmValidator">CDM Validator Service Now a Separate Web Application</a></h2>
<p>As of
TDS 4.0, the CDM Coordinate System validator is no longer available as
part of the TDS. It is available as a separate web application
distributed in its own .war file.&nbsp;</p><p>
  System requirements are the same as for the <a href="../TDS.html">TDS</a>.
  Download information is also available on the
  <a href="../TDS.html#CDM_Coordinate_System_Validator">TDS page</a>.</p>

<h2><a name="HtmlConfig">Configuration for HTML Pages</a></h2>
<p>TDS 4.0 gives you more control over the HTML pages generated by TDS. Some information you can configure in the <code>threddsConfig.xml</code> file:</p>
<ul>
  <li>Standard CSS document to use.</li>
  <li>CSS document for HTML catalog view pages.</li>
  <li>Name, URL, and logo for your TDS installation (optional).</li>
  <li>Name, URL, and logo for the institution at which you are running your TDS installation (optional).</li>
</ul>
<p>The following is an example from one of our TDS installations:</p>
<pre style="margin-left: 40px;">  &lt;htmlSetup&gt;<br>    &lt;cssPage&gt;tds.css&lt;/cssPage&gt;<br>    &lt;cssCatalog&gt;tdsCat.css&lt;/cssCatalog&gt;<br><br>    &lt;folderIconUrl&gt;folder.gif&lt;/folderIconUrl&gt;<br>    &lt;folderIconAlt&gt;Folder&lt;/folderIconAlt&gt;<br>    &lt;datasetIconUrl&gt;dataset.gif&lt;/datasetIconUrl&gt;<br>    &lt;datasetIconAlt&gt;Dataset&lt;/datasetIconAlt&gt;<br><br>    &lt;installName&gt;Motherlode TDS&lt;/installName&gt;<br>    &lt;installLogoUrl&gt;unidataLogo.gif&lt;/installLogoUrl&gt;<br>    &lt;installLogoAlt&gt;Motherlode TDS&lt;/installLogoAlt&gt;<br><br>    &lt;hostInstName&gt;Unidata&lt;/hostInstName&gt;<br>    &lt;hostInstUrl&gt;http://www.unidata.ucar.edu/&lt;/hostInstUrl&gt;<br>    &lt;hostInstLogoUrl&gt;unidataLogo.gif&lt;/hostInstLogoUrl&gt;<br>    &lt;hostInstLogoAlt&gt;Unidata&lt;/hostInstLogoAlt&gt;<br>  &lt;/htmlSetup&gt;</pre>
<p>&nbsp;&nbsp;&nbsp;NOTE:
URLs may be absolute or relative, relative URLs must be
relative&nbsp;to the webapp URL, i.e., http://server:port/thredds/.</p>

<h2><a name="CatalogServiceDiffs">Catalog Services Use Different Parameters Than 3.16/3.17</a></h2>
<p>Catalog services include HTML views, subsetting, and validation of catalogs. These services have been simplified in TDS 4.0.</p>
<ul>
  <li>Details of <a href="reference/CatalogService.html">catalog services in TDS 4.0</a></li>
  <li>Details of <a href="../reference/CatalogService.html">catalog services in TDS 3.16/3.17</a></li>
</ul>

<h2><a name="RemoteManagement">TDS Remote Management</a></h2>

<p>The URL to access TDS remote management is now</p>
<pre style="margin-left: 40px;"> https://server:port/thredds/admin/debug</pre>
<p>In TDS 3.16/3.17, it was https://server:port/thredds/debug. Note that
  this is available only under SSH, which you must
  <a href="../reference/RemoteManagement.html">enable</a>.</p>

<hr width="100%">

<address>
<img src="../images/thread.png" height="108" width="110">This document is maintained by Unidata and was
last updated June 09, 2009. Send comments to <a href="mailto:support-thredds@unidata.ucar.edu">THREDDS
support</a>.
</address>

</body>
</html>