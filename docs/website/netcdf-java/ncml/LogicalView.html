<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <title>Untitled Document</title>
  <link href="../cdm.css" rel="stylesheet" type="text/css"/>
</head>

<body>
<h3>4. Subset a variable's data</h3>

<p>In the example below, we use <em> <strong>logicalView</strong></em> elements to define new variables (<em>T-FHAG,
  T-MandatoryLevels, </em>and<em> T-BoundaryLayers</em>) whose data are subsets of an existing variable (named <em><strong>t</strong></em> in the file). We do
  this because the original file has 3 vertical coordinates munged together in the levels_25 dimension, and we want to break that into 3 seperate variables.</p>

<p>The locicalView element currrently has only one attribute <em><strong>section </strong></em>whose value defines the data section, according to these rules:
</p>
<ul>
  <li>to select all of a dimension, use as asterisk (*)</li>
  <li>to select one slice, just use the value of the index</li>
  <li>to select a range, use start:end, eg 1:19</li>
</ul>
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;<br>&lt;netcdf xmlns=&quot;http://www.ucar.edu/schemas/netcdf&quot; <br>	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;<br>	xsi:schemaLocation=&quot;http://www.ucar.edu/schemas/netcdf http://www.unidata.ucar.edu/schemas/netcdfDataset2.xsd&quot;<br>	uri=&quot;file:///C:/data/conventions/awips/awipsTestFilename.nc&quot;&gt;</pre>
<pre> &lt;dimension name=&quot;record&quot; length=&quot;11&quot; isUnlimited=&quot;true&quot;/&gt;
 &lt;dimension name=&quot;x&quot; length=&quot;93&quot;/&gt;
 &lt;dimension name=&quot;y&quot; length=&quot;65&quot;/&gt;
 &lt;dimension name=&quot;levels_25&quot; length=&quot;25&quot;/&gt;
 &lt;dimension name=&quot;FHAG&quot; length=&quot;1&quot;/&gt;
 &lt;dimension name=&quot;MandatoryLevels&quot; length=&quot;19&quot;/&gt;
 &lt;dimension name=&quot;BoundaryLayers&quot; length=&quot;5&quot;/&gt;
 
 &lt;variable name=&quot;T-FHAG&quot; shape=&quot;record FHAG y x&quot; type=&quot;float&quot;    nameInFile=&quot;t&quot;&gt;
   &lt;attribute name=&quot;long_name&quot; type=&quot;string&quot; value=&quot;Temperature    at fixed height above ground&quot;/&gt;
   &lt;attribute name=&quot;units&quot; type=&quot;string&quot; value=&quot;K&quot;/&gt;
   &lt;attribute name=&quot;valid_range&quot; type=&quot;float&quot; value=&quot;180.0    330.0&quot;/&gt;
   &lt;attribute name=&quot;_FillValue&quot; type=&quot;float&quot; value=&quot;-99999.0&quot;/&gt;
   &lt;logicalView section=&quot;*,0,*,*&quot; /&gt;
 &lt;/variable&gt;
   
 &lt;variable name=&quot;T-MandatoryLevels&quot; shape=&quot;record MandatoryLevels    y x&quot; type=&quot;float&quot; nameInFile=&quot;t&quot;&gt;
   &lt;attribute name=&quot;long_name&quot; type=&quot;string&quot; value=&quot;Temperature    on Mandatory Levels&quot;/&gt;
   &lt;attribute name=&quot;units&quot; type=&quot;string&quot; value=&quot;K&quot;/&gt;
   &lt;attribute name=&quot;valid_range&quot; type=&quot;float&quot; value=&quot;180.0    330.0&quot;/&gt;
   &lt;attribute name=&quot;_FillValue&quot; type=&quot;float&quot; value=&quot;-99999.0&quot;/&gt;
   &lt;logicalView section=&quot;*,1:19,*,*&quot; /&gt;
 &lt;/variable&gt;
   
 &lt;variable name=&quot;T-BoundaryLayers&quot; shape=&quot;record BoundaryLayers    y x&quot; type=&quot;float&quot; nameInFile=&quot;t&quot;&gt;
   &lt;attribute name=&quot;long_name&quot; type=&quot;string&quot; value=&quot;Temperature    on BoundaryLayers&quot;/&gt;
   &lt;attribute name=&quot;units&quot; type=&quot;string&quot; value=&quot;K&quot;/&gt;
   &lt;attribute name=&quot;valid_range&quot; type=&quot;float&quot; value=&quot;180.0    330.0&quot;/&gt;
   &lt;attribute name=&quot;_FillValue&quot; type=&quot;float&quot; value=&quot;-99999.0&quot;/&gt;
   &lt;logicalView section=&quot;*,20:24,*,*&quot; /&gt;
 &lt;/variable&gt;
   
 &lt;variable name=&quot;t&quot; shape=&quot;record levels_25 y x&quot; type=&quot;float&quot;&gt;
   &lt;attribute name=&quot;long_name&quot; type=&quot;string&quot; value=&quot;Temperature&quot;/&gt;
   &lt;attribute name=&quot;units&quot; type=&quot;string&quot; value=&quot;K&quot;/&gt;
   &lt;attribute name=&quot;valid_range&quot; type=&quot;float&quot; value=&quot;180.0    330.0&quot;/&gt;
   &lt;attribute name=&quot;_FillValue&quot; type=&quot;float&quot; value=&quot;-99999.0&quot;/&gt;
 &lt;/variable&gt;
   
 &lt;variable name=&quot;FHAG&quot; type=&quot;float&quot; shape=&quot;FHAG&quot;&gt;
   &lt;attribute name=&quot;long_name&quot; type=&quot;string&quot; value=&quot;fixed height above ground&quot;/&gt;
   &lt;attribute name=&quot;units&quot; type=&quot;string&quot; value=&quot;m&quot;/&gt;
   &lt;attribute name=&quot;positive&quot; type=&quot;string&quot; value=&quot;up&quot;/&gt;
   &lt;values&gt;2.0&lt;/values&gt; 
 &lt;/variable&gt;
   
 &lt;variable name='MandatoryLevels' type=&quot;int&quot; shape=&quot;MandatoryLevels&quot;&gt;
   &lt;attribute name=&quot;units&quot; type=&quot;string&quot; value=&quot;hPa&quot;    /&gt;
   &lt;attribute name=&quot;long_name&quot; type=&quot;string&quot; value=&quot;Pressure    Levels&quot; /&gt;
   &lt;values&gt;1000 950 900 850 800 750 700 650 600 550 500 450 400 350 300 250    200 150 100&lt;/values&gt; 
 &lt;/variable&gt;
   
 &lt;variable name=&quot;BoundaryLayers&quot; shape=&quot;BoundaryLayers&quot;    type=&quot;double&quot;&gt;
   &lt;attribute name=&quot;units&quot; type=&quot;string&quot; value=&quot;hPa&quot;    /&gt;
   &lt;attribute name=&quot;long_name&quot; type=&quot;string&quot; value=&quot;BoundaryLayer    hectoPascals above ground&quot; /&gt;
   &lt;values start=&quot;0.0&quot; increment=&quot;30.0&quot; npts=&quot;5&quot;    /&gt;
  &lt;/variable &gt;
   
&lt;/netcdf&gt;
 </pre>
<p>NB: This example is taken from the infamous AWIPS formatted netCDF files, and is a good example of using the logicalView element. If you have to work with
  AWIPS files, the dataset convention parsing code will do all the hard work, so you do not need to use NcML to break up the variables yourself. </p>
<script src="https://docs.unidata.ucar.edu/js/ncj46_add_in.js" type="text/javascript"></script>
</body>
</html>
