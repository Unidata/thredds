<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Transition to 4.0</title>
</head>

<body>
<h1>Transitioning to version 4.0</h1>
<p><br>
Version 4 is an extensive refactoring of the library, and many significant improvements and bug fixes have been made.</p>
<p>There are many API changes that you may see when you start using 4.0 with an application that was using 2.2. These are mostly minor and in all cases have equivalent or improved functionality in 4.0. Most of the changes are in implementation classes not often used by simple applications. </p>
<p><a href="jarDiff.html">A complete list of all API changes</a></p>
<p><a href="APIchanges.txt">An overview of the most important changes</a></p>
<p>The following are a quick reference to changes that you are most likely to see. </p>
<table width="600" border="1">
  <tr>
    <th scope="col">2.2</th>
    <th scope="col">4.0</th>
  </tr>
  <tr>
    <td>thredds.catalog.DataType</td>
    <td>ucar.nc2.constants.FeatureType</td>
  </tr>
  <tr>
    <td>ucar.nc2.dataset.AxisType</td>
    <td>ucar.nc2.constants.AxisType</td>
  </tr>
  <tr>
    <td><p>ucar.nc2.dataset.conv._Coordinate</p></td>
    <td>ucar.nc2.constants._Coordinate</td>
  </tr>
  <tr>
    <td>ucar.nc2.dataset.NetcdfDataset.makeArray()</td>
    <td>ucar.ma2.Array.makeArray()</td>
  </tr>
  <tr>
    <td>List&lt;Range&gt; ranges</td>
    <td>Section.getRanges()</td>
  </tr>
  <tr>
    <td>ucar.nc2.dt.TypedDatasetFactory</td>
    <td>ucar.nc2.ft.FeatureDatasetFactoryManager</td>
  </tr>
</table>
<h4>Miscellaneous Notes </h4>
<ul>
  <li><strong>DateUnit</strong> is no longer a subclass of SimpleUnit, so you cannot use SimpleUnit.factory() to create a DateUnit.</li>
  <li>There is no longer a <strong>CoordinateAxis1D(VariableDS)</strong> constructor. One must now use CoordinateAxis1D(NetcdfDataset,VariableDS).</li>
  <li>java.lang.<strong>StringBuffer</strong> is replaced in various places by java.lang.StringBuilder or java.util.Formatter.</li>
  <li><strong>ucar.nc2.FileWriter.main</strong>() writes CDM files to netcdf-3 format. <strong>ucar.nc2.dataset.NetcdfDataset..main</strong>() will do the same, but you can also open NcML, OPeNDAP, and other datasets accessible with <strong>NetcdfDataset</strong>.<strong>openFile</strong>().</li>
</ul>
<hr>
<h2>UI</h2>
<p>If you had previously set up HttpClient handling like this: </p>
<pre> ucar.nc2.<strong>dataset</strong>.HttpClientManager.init(provider, clientName);
</pre>
<p>  replace it with:</p>
<pre>
 HttpClient client = ucar.nc2.<strong>util.net</strong>.HttpClientManager.init(provider, clientName);
 opendap.dap.DConnect2.setHttpClient(client);
 ucar.unidata.io.http.HTTPRandomAccessFile.setHttpClient(client);
 ucar.nc2.dataset.NetcdfDataset.setHttpClient(client);</pre>
<hr WIDTH="100%">
<address>
<a href="../NetcdfUsers.htm"><img src="../nc.gif" width="64" height="64" border="0"></a> This document is maintained by <a href="mailto:caron@unidata.ucar.edu">John Caron</a> and was last updated on Feb 10, 2009
</address>
</body>
</html>
